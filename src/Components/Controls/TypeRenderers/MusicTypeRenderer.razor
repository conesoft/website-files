@using Conesoft.Website.Files.Components.Controls.FileRenderers
@inherits DefaultTypeRenderer

@code {
    public override string[] Extensions => ["flac", "mp3"];

    public override bool InCategory(Entry entry) => entry.IsFile && Extensions.Contains(entry.AsFile!.Extension[1..]);

    string CleanUp(string extension)
    {
        extension = extension.Replace(".", "");
        extension = char.ToUpper(extension[0]) + extension[1..];
        return extension;
    }
}

@{
    var type = Type.GetType($"Conesoft.Website.Files.Components.Controls.FileRenderers.{CleanUp(Current.AsFile!.Extension)}FileRenderer")
        ?? typeof(Controls.FileRenderers.DefaultFileRenderer);

    var parameters = new Dictionary<string, object>
            {
                ["Current"] = Current,
                ["Path"] = Path
            };
}

<DynamicComponent Type="@type" Parameters="@parameters" />